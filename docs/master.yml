- name: group
  doc:
    title: グループ
    description: ユーザをまとめるグループ
    context:
      - 階層構造を取る
      - parent=nullであれば、最上位グループとする
      - 階層の深さに制限はない
  fields:
    - name: id
      type: AutoField
      verbose_name: id
      is_null: false
      primary_key: true
      index: false
    - name: name
      type: CharField
      verbose_name: グループ名
      is_null: false
      is_unique: true
      primary_key: false
      index: false
    - name: parent_id
      type: ForeignKey
      verbose_name: 親グループ
      is_null: true
      is_unique: false
      primary_key: false
      relation: group.id
      index: true
  constraints:
    - type: UniqueConstraint
      fields:
        - name
      name: group_name_uniq
  indexes: []
- name: user
  doc:
    title: ユーザ-
  fields:
    - name: id
      type: AutoField
      verbose_name: id
      is_null: false
      primary_key: true
      index: false
    - name: created_at
      type: DateTimeField
      verbose_name: created at
      is_null: false
      is_unique: false
      primary_key: false
      index: false
    - name: name
      type: CharField
      verbose_name: ユーザー名
      is_null: false
      is_unique: false
      primary_key: false
      index: false
    - name: code
      type: CharField
      verbose_name: ユーザーユニークコード
      is_null: false
      is_unique: true
      primary_key: false
      index: true
  constraints: []
  indexes: []
- name: group_user_relation
  doc:
    title: ユーザ-とグループの紐付け
    context: ユーザーは複数グループに所属できる
  fields:
    - name: id
      type: AutoField
      verbose_name: id
      is_null: false
      primary_key: true
      index: false
    - name: group_id
      type: ForeignKey
      verbose_name: group
      is_null: false
      is_unique: false
      primary_key: false
      relation: group.id
      index: true
    - name: user_id
      type: ForeignKey
      verbose_name: user
      is_null: false
      is_unique: false
      primary_key: false
      relation: user.id
      index: true
  constraints: []
  indexes: []
- name: tag
  doc:
    title: タグ
    description: 記事やユーザーなどにタグをつけることができる
    context:
      - 公式タグフラグがtrueなら、サービス提供者が用意したタグであることを示す
      - タグはユーザーが任意に作成でき、それを他ユーザーが利用できる
  fields:
    - name: id
      type: AutoField
      verbose_name: id
      is_null: false
      primary_key: true
      index: false
    - name: created_at
      type: DateTimeField
      verbose_name: created at
      is_null: false
      is_unique: false
      primary_key: false
      index: false
    - name: created_by_id
      type: ForeignKey
      verbose_name: created by
      is_null: false
      is_unique: false
      primary_key: false
      relation: user.id
      index: true
    - name: name
      type: CharField
      verbose_name: タグ名
      is_null: false
      is_unique: true
      primary_key: false
      index: false
    - name: is_official
      type: BooleanField
      verbose_name: 公式タグフラグ
      is_null: false
      is_unique: false
      primary_key: false
      index: false
  constraints: []
  indexes: []
- name: user_tag_relation
  doc:
    title: ユーザ-とタグの紐付け
    context:
      - ユーザーのタグフォロー状況
      - フォローを外せばレコードが削除される
  fields:
    - name: id
      type: AutoField
      verbose_name: id
      is_null: false
      primary_key: true
      index: false
    - name: created_at
      type: DateTimeField
      verbose_name: created at
      is_null: false
      is_unique: false
      primary_key: false
      index: false
    - name: user_id
      type: ForeignKey
      verbose_name: user
      is_null: false
      is_unique: false
      primary_key: false
      relation: user.id
      index: true
    - name: tag_id
      type: ForeignKey
      verbose_name: tag
      is_null: false
      is_unique: false
      primary_key: false
      relation: tag.id
      index: true
  constraints:
    - type: UniqueConstraint
      fields:
        - user
        - tag
      name: user_and_tag_uniq
  indexes: []
